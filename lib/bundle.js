(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.hubble = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";function _typeof(r){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}!function(r,n){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((void 0).d3=(void 0).d3||{})}(0,function(r){var n={},t={},o=34,e=10,u=13;function f(r){return new Function("d","return {"+r.map(function(r,n){return JSON.stringify(r)+": d["+n+"]"}).join(",")+"}")}function i(r){var i=new RegExp('["'+r+"\n\r]"),c=r.charCodeAt(0);function a(r,f){var i,a=[],s=r.length,p=0,d=0,l=s<=0,m=!1;function v(){if(l)return t;if(m)return m=!1,n;var f,i,a=p;if(r.charCodeAt(a)===o){for(;p++<s&&r.charCodeAt(p)!==o||r.charCodeAt(++p)===o;);return(f=p)>=s?l=!0:(i=r.charCodeAt(p++))===e?m=!0:i===u&&(m=!0,r.charCodeAt(p)===e&&++p),r.slice(a+1,f-1).replace(/""/g,'"')}for(;p<s;){if((i=r.charCodeAt(f=p++))===e)m=!0;else if(i===u)m=!0,r.charCodeAt(p)===e&&++p;else if(i!==c)continue;return r.slice(a,f)}return l=!0,r.slice(a,s)}for(r.charCodeAt(s-1)===e&&--s,r.charCodeAt(s-1)===u&&--s;(i=v())!==t;){for(var y=[];i!==n&&i!==t;)y.push(i),i=v();f&&null==(y=f(y,d++))||a.push(y)}return a}function s(n){return n.map(p).join(r)}function p(r){return null==r?"":i.test(r+="")?'"'+r.replace(/"/g,'""')+'"':r}return{parse:function(r,n){var t,o,e=a(r,function(r,e){if(t)return t(r,e-1);o=r,t=n?function(r,n){var t=f(r);return function(o,e){return n(t(o),e,r)}}(r,n):f(r)});return e.columns=o||[],e},parseRows:a,format:function(n,t){return null==t&&(t=function(r){var n=Object.create(null),t=[];return r.forEach(function(r){for(var o in r)o in n||t.push(n[o]=o)}),t}(n)),[t.map(p).join(r)].concat(n.map(function(n){return t.map(function(r){return p(n[r])}).join(r)})).join("\n")},formatRows:function(r){return r.map(s).join("\n")}}}var c=i(","),a=c.parse,s=c.parseRows,p=c.format,d=c.formatRows,l=i("\t"),m=l.parse,v=l.parseRows,y=l.format,h=l.formatRows;r.dsvFormat=i,r.csvParse=a,r.csvParseRows=s,r.csvFormat=p,r.csvFormatRows=d,r.tsvParse=m,r.tsvParseRows=v,r.tsvFormat=y,r.tsvFormatRows=h,Object.defineProperty(r,"__esModule",{value:!0})});

},{}],2:[function(require,module,exports){
"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,n){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?n(exports,require("d3-dsv")):"function"==typeof define&&define.amd?define(["exports","d3-dsv"],n):n((void 0).d3=(void 0).d3||{},(void 0).d3)}(0,function(t,n){function e(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function r(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function o(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function u(t,n){return fetch(t,n).then(o)}function f(t){return function(n,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=void 0),u(n,e).then(function(n){return t(n,r)})}}var i=f(n.csvParse),s=f(n.tsvParse);function c(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.json()}function a(t){return function(n,e){return u(n,e).then(function(n){return(new DOMParser).parseFromString(n,t)})}}var d=a("application/xml"),p=a("text/html"),y=a("image/svg+xml");t.blob=function(t,n){return fetch(t,n).then(e)},t.buffer=function(t,n){return fetch(t,n).then(r)},t.dsv=function(t,e,r,o){3===arguments.length&&"function"==typeof r&&(o=r,r=void 0);var f=n.dsvFormat(t);return u(e,r).then(function(t){return f.parse(t,o)})},t.csv=i,t.tsv=s,t.image=function(t,n){return new Promise(function(e,r){var o=new Image;for(var u in n)o[u]=n[u];o.onerror=r,o.onload=function(){e(o)},o.src=t})},t.json=function(t,n){return fetch(t,n).then(c)},t.text=u,t.xml=d,t.html=p,t.svg=y,Object.defineProperty(t,"__esModule",{value:!0})});

},{"d3-dsv":1}],3:[function(require,module,exports){
(function (global){
"use strict";function _typeof(n){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}(function(){var n,t="Expected a function",r=1,e=2,u=1,o=1/0,i=9007199254740991,f="[object Arguments]",c="[object Array]",a="[object AsyncFunction]",l="[object Boolean]",p="[object Date]",s="[object Error]",v="[object Function]",h="[object GeneratorFunction]",y="[object Number]",_="[object Object]",b="[object Proxy]",g="[object RegExp]",d="[object String]",m=/[&<>"']/g,j=RegExp(m.source),O=/^(?:0|[1-9]\d*)$/,x="object"==("undefined"==typeof global?"undefined":_typeof(global))&&global&&global.Object===Object&&global,w="object"==("undefined"==typeof self?"undefined":_typeof(self))&&self&&self.Object===Object&&self,A=x||w||Function("return this")(),E="object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&exports&&!exports.nodeType&&exports,S=E&&"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module&&!module.nodeType&&module;function N(n,t){return n.push.apply(n,t),n}function k(t){return function(r){return null==r?n:r[t]}}var F,T=(F={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},function(t){return null==F?n:F[t]});var B,I,R=Array.prototype,$=Object.prototype,q=$.hasOwnProperty,D=0,P=$.toString,z=A._,C=Object.create,G=$.propertyIsEnumerable,J=A.isFinite,M=(B=Object.keys,I=Object,function(n){return B(I(n))}),U=Math.max;function V(n){return n instanceof K?n:new K(n)}var H=function(){function t(){}return function(r){if(!Vn(r))return{};if(C)return C(r);t.prototype=r;var e=new t;return t.prototype=n,e}}();function K(n,t){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!t}function L(t,r,e){var u=t[r];q.call(t,r)&&zn(u,e)&&(e!==n||r in t)||Q(t,r,e)}function Q(n,t,r){n[t]=r}function W(r,e,u){if("function"!=typeof r)throw new TypeError(t);return setTimeout(function(){r.apply(n,u)},e)}K.prototype=H(V.prototype),K.prototype.constructor=K;var X,Y,Z=(X=un,function(n,t){if(null==n)return n;if(!Jn(n))return X(n,t);for(var r=n.length,e=Y?r:-1,u=Object(n);(Y?e--:++e<r)&&!1!==t(u[e],e,u););return n});function nn(t,r,e){for(var u=-1,o=t.length;++u<o;){var i=t[u],f=r(i);if(null!=f&&(c===n?f==f:e(f,c)))var c=f,a=i}return a}function tn(n,t){var r=[];return Z(n,function(n,e,u){t(n,e,u)&&r.push(n)}),r}function rn(n,t,r,e,u){var o=-1,i=n.length;for(r||(r=On),u||(u=[]);++o<i;){var f=n[o];t>0&&r(f)?t>1?rn(f,t-1,r,e,u):N(u,f):e||(u[u.length]=f)}return u}var en=function(n){return function(t,r,e){for(var u=-1,o=Object(t),i=e(t),f=i.length;f--;){var c=i[n?f:++u];if(!1===r(o[c],c,o))break}return t}}();function un(n,t){return n&&en(n,t,rt)}function on(n,t){return tn(t,function(t){return Un(n[t])})}function fn(n){return function(n){return P.call(n)}(n)}function cn(n,t){return n>t}var an=lt;function ln(t,u,o,i,a){return t===u||(null==t||null==u||!Hn(t)&&!Hn(u)?t!=t&&u!=u:function(t,u,o,i,a,v){var h=Gn(t),b=Gn(u),m=h?c:fn(t),j=b?c:fn(u),O=(m=m==f?_:m)==_,x=(j=j==f?_:j)==_,w=m==j;v||(v=[]);var A=Bn(v,function(n){return n[0]==t}),E=Bn(v,function(n){return n[0]==u});if(A&&E)return A[1]==u;if(v.push([t,u]),v.push([u,t]),w&&!O){var S=h?function(t,u,o,i,f,c){var a=o&r,l=t.length,p=u.length;if(l!=p&&!(a&&p>l))return!1;var s=-1,v=!0,h=o&e?[]:n;for(;++s<l;){var y=t[s],_=u[s];if(void 0!==n){void 0,v=!1;break}if(h){if(!gn(u,function(n,t){if(!kn(h,t)&&(y===n||f(y,n,o,i,c)))return h.push(t)})){v=!1;break}}else if(y!==_&&!f(y,_,o,i,c)){v=!1;break}}return v}(t,u,o,i,a,v):function(n,t,r,e,u,o,i){switch(r){case l:case p:case y:return zn(+n,+t);case s:return n.name==t.name&&n.message==t.message;case g:case d:return n==t+""}return!1}(t,u,m);return v.pop(),S}if(!(o&r)){var N=O&&q.call(t,"__wrapped__"),k=x&&q.call(u,"__wrapped__");if(N||k){var F=N?t.value():t,T=k?u.value():u,S=a(F,T,o,i,v);return v.pop(),S}}if(!w)return!1;var S=function(t,e,u,o,i,f){var c=u&r,a=rt(t),l=a.length,p=rt(e).length;if(l!=p&&!c)return!1;var s=l;for(;s--;){var v=a[s];if(!(c?v in e:q.call(e,v)))return!1}var h=!0,y=c;for(;++s<l;){v=a[s];var _=t[v],b=e[v];if(!(void 0===n?_===b||i(_,b,u,o,f):void 0)){h=!1;break}y||(y="constructor"==v)}if(h&&!y){var g=t.constructor,d=e.constructor;g!=d&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof d&&d instanceof d)&&(h=!1)}return h}(t,u,o,i,a,v);return v.pop(),S}(t,u,o,i,ln,a))}function pn(n){return"function"==typeof n?n:null==n?it:("object"==_typeof(n)?hn:k)(n)}function sn(n,t){return n<t}function vn(n,t){var r=-1,e=Jn(n)?Array(n.length):[];return Z(n,function(n,u,o){e[++r]=t(n,u,o)}),e}function hn(n){var t=M(n);return function(u){var o=t.length;if(null==u)return!o;for(u=Object(u);o--;){var i=t[o];if(!(i in u&&ln(n[i],u[i],r|e)))return!1}return!0}}function yn(n,t){return En(An(n,t,it),n+"")}function _n(n,t,r){var e=-1,u=n.length;t<0&&(t=-t>u?0:u+t),(r=r>u?u:r)<0&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(u);++e<u;)o[e]=n[e+t];return o}function bn(n){return _n(n,0,n.length)}function gn(n,t){var r;return Z(n,function(n,e,u){return!(r=t(n,e,u))}),!!r}function dn(t,r,e,u){var o=!e;e||(e={});for(var i=-1,f=r.length;++i<f;){var c=r[i],a=u?u(e[c],t[c],c,e,t):n;a===n&&(a=t[c]),o?Q(e,c,a):L(e,c,a)}return e}function mn(t){return yn(function(r,e){var u=-1,o=e.length,i=o>1?e[o-1]:n;for(i=t.length>3&&"function"==typeof i?(o--,i):n,r=Object(r);++u<o;){var f=e[u];f&&t(r,f,u,i)}return r})}function jn(n,r,e,o){if("function"!=typeof n)throw new TypeError(t);var i=r&u,f=function(n){return function(){var t=arguments,r=H(n.prototype),e=n.apply(r,t);return Vn(e)?e:r}}(n);return function t(){for(var r=-1,u=arguments.length,c=-1,a=o.length,l=Array(a+u),p=this&&this!==A&&this instanceof t?f:n;++c<a;)l[c]=o[c];for(;u--;)l[c++]=arguments[++r];return p.apply(i?e:this,l)}}function On(n){return Gn(n)||Cn(n)}function xn(n,t,r){if(!Vn(r))return!1;var e=_typeof(t);return!!("number"==e?Jn(r)&&function(n,t){var r=_typeof(n);return!!(t=null==t?i:t)&&("number"==r||"symbol"!=r&&O.test(n))&&n>-1&&n%1==0&&n<t}(t,r.length):"string"==e&&t in r)&&zn(r[t],n)}function wn(n){var t=[];if(null!=n)for(var r in Object(n))t.push(r);return t}function An(t,r,e){return r=U(r===n?t.length-1:r,0),function(){for(var n=arguments,u=-1,o=U(n.length-r,0),i=Array(o);++u<o;)i[u]=n[r+u];u=-1;for(var f=Array(r+1);++u<r;)f[u]=n[u];return f[r]=e(i),t.apply(this,f)}}var En=it;function Sn(n){return(null==n?0:n.length)?rn(n,1):[]}function Nn(t){return t&&t.length?t[0]:n}function kn(n,t,r){for(var e=null==n?0:n.length,u=((r="number"==typeof r?r<0?U(e+r,0):r:0)||0)-1,o=t==t;++u<e;){var i=n[u];if(o?i===t:i!=i)return u}return-1}function Fn(n){var t=V(n);return t.__chain__=!0,t}var Tn,Bn=(Tn=function(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=null==r?0:Wn(r);return u<0&&(u=U(e+u,0)),function(n,t,r,e){for(var u=n.length,o=r+(e?1:-1);e?o--:++o<u;)if(t(n[o],o,n))return o;return-1}(n,pn(t),u)},function(t,r,e){var u=Object(t);if(!Jn(t)){var o=pn(r);t=rt(t),r=function(n){return o(u[n],n,u)}}var i=Tn(t,r,e);return i>-1?u[o?t[i]:i]:n});function In(n,t){return Z(n,pn(t))}function Rn(n,t,r){return function(n,t,r,e,u){return u(n,function(n,u,o){r=e?(e=!1,n):t(r,n,u,o)}),r}(n,pn(t),r,arguments.length<3,Z)}function $n(r,e){var u;if("function"!=typeof e)throw new TypeError(t);return r=Wn(r),function(){return--r>0&&(u=e.apply(this,arguments)),r<=1&&(e=n),u}}var qn=yn(function(n,t,r){return jn(n,32|u,t,r)}),Dn=yn(function(n,t){return W(n,1,t)}),Pn=yn(function(n,t,r){return W(n,Xn(t)||0,r)});function zn(n,t){return n===t||n!=n&&t!=t}var Cn=an(function(){return arguments}())?an:function(n){return Hn(n)&&q.call(n,"callee")&&!G.call(n,"callee")},Gn=Array.isArray;function Jn(n){return null!=n&&function(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=i}(n.length)&&!Un(n)}var Mn=function(n){return Hn(n)&&fn(n)==p};function Un(n){if(!Vn(n))return!1;var t=fn(n);return t==v||t==h||t==a||t==b}function Vn(n){var t=_typeof(n);return null!=n&&("object"==t||"function"==t)}function Hn(n){return null!=n&&"object"==_typeof(n)}function Kn(n){return"number"==typeof n||Hn(n)&&fn(n)==y}var Ln=function(n){return Hn(n)&&fn(n)==g};function Qn(n){return"string"==typeof n||!Gn(n)&&Hn(n)&&fn(n)==d}var Wn=Number,Xn=Number;function Yn(n){return"string"==typeof n?n:null==n?"":n+""}var Zn=mn(function(n,t){dn(t,M(t),n)}),nt=mn(function(n,t){dn(t,wn(t),n)});var tt=yn(function(t,r){t=Object(t);var e=-1,u=r.length,o=u>2?r[2]:n;for(o&&xn(r[0],r[1],o)&&(u=1);++e<u;)for(var i=r[e],f=et(i),c=-1,a=f.length;++c<a;){var l=f[c],p=t[l];(p===n||zn(p,$[l])&&!q.call(t,l))&&(t[l]=i[l])}return t});var rt=M,et=wn,ut=function(t){return En(An(t,n,Sn),t+"")}(function(n,t){return null==n?{}:function(n,t){return n=Object(n),Rn(t,function(t,r){return r in n&&(t[r]=n[r]),t},{})}(n,t)});function ot(n){return null==n?[]:function(n,t){return vn(t,function(t){return n[t]})}(n,rt(n))}function it(n){return n}var ft,ct=pn;function at(n,t,r){var e=rt(t),u=on(t,e);null!=r||Vn(t)&&(u.length||!e.length)||(r=t,t=n,n=this,u=on(t,rt(t)));var o=!(Vn(r)&&"chain"in r&&!r.chain),i=Un(n);return Z(u,function(r){var e=t[r];n[r]=e,i&&(n.prototype[r]=function(){var t=this.__chain__;if(o||t){var r=n(this.__wrapped__);return(r.__actions__=bn(this.__actions__)).push({func:e,args:arguments,thisArg:n}),r.__chain__=t,r}return e.apply(n,N([this.value()],arguments))})}),n}function lt(){}V.assignIn=nt,V.before=$n,V.bind=qn,V.chain=Fn,V.compact=function(n){return tn(n,Boolean)},V.concat=function(){var n=arguments.length;if(!n)return[];for(var t=Array(n-1),r=arguments[0],e=n;e--;)t[e-1]=arguments[e];return N(Gn(r)?bn(r):[r],rn(t,1))},V.create=function(n,t){var r=H(n);return null==t?r:Zn(r,t)},V.defaults=tt,V.defer=Dn,V.delay=Pn,V.filter=function(n,t){return tn(n,pn(t))},V.flatten=Sn,V.flattenDeep=function(n){return null!=n&&n.length?rn(n,o):[]},V.iteratee=ct,V.keys=rt,V.map=function(n,t){return vn(n,pn(t))},V.matches=function(n){return hn(Zn({},n))},V.mixin=at,V.negate=function(n){if("function"!=typeof n)throw new TypeError(t);return function(){var t=arguments;return!n.apply(this,t)}},V.once=function(n){return $n(2,n)},V.pick=ut,V.slice=function(t,r,e){var u=null==t?0:t.length;return r=null==r?0:+r,e=e===n?u:+e,u?_n(t,r,e):[]},V.sortBy=function(t,r){var e=0;return r=pn(r),vn(vn(t,function(n,t,u){return{value:n,index:e++,criteria:r(n,t,u)}}).sort(function(t,r){return function(t,r){if(t!==r){var e=t!==n,u=null===t,o=t==t,i=r!==n,f=null===r,c=r==r;if(!f&&t>r||u&&i&&c||!e&&c||!o)return 1;if(!u&&t<r||f&&e&&o||!i&&o||!c)return-1}return 0}(t.criteria,r.criteria)||t.index-r.index}),k("value"))},V.tap=function(n,t){return t(n),n},V.thru=function(n,t){return t(n)},V.toArray=function(n){return Jn(n)?n.length?bn(n):[]:ot(n)},V.values=ot,V.extend=nt,at(V,V),V.clone=function(n){return Vn(n)?Gn(n)?bn(n):dn(n,M(n)):n},V.escape=function(n){return(n=Yn(n))&&j.test(n)?n.replace(m,T):n},V.every=function(t,r,e){return function(n,t){var r=!0;return Z(n,function(n,e,u){return r=!!t(n,e,u)}),r}(t,pn(r=e?n:r))},V.find=Bn,V.forEach=In,V.has=function(n,t){return null!=n&&q.call(n,t)},V.head=Nn,V.identity=it,V.indexOf=kn,V.isArguments=Cn,V.isArray=Gn,V.isBoolean=function(n){return!0===n||!1===n||Hn(n)&&fn(n)==l},V.isDate=Mn,V.isEmpty=function(n){return Jn(n)&&(Gn(n)||Qn(n)||Un(n.splice)||Cn(n))?!n.length:!M(n).length},V.isEqual=function(n,t){return ln(n,t)},V.isFinite=function(n){return"number"==typeof n&&J(n)},V.isFunction=Un,V.isNaN=function(n){return Kn(n)&&n!=+n},V.isNull=function(n){return null===n},V.isNumber=Kn,V.isObject=Vn,V.isRegExp=Ln,V.isString=Qn,V.isUndefined=function(t){return t===n},V.last=function(t){var r=null==t?0:t.length;return r?t[r-1]:n},V.max=function(t){return t&&t.length?nn(t,it,cn):n},V.min=function(t){return t&&t.length?nn(t,it,sn):n},V.noConflict=function(){return A._===this&&(A._=z),this},V.noop=lt,V.reduce=Rn,V.result=function(t,r,e){var u=null==t?n:t[r];return u===n&&(u=e),Un(u)?u.call(t):u},V.size=function(n){return null==n?0:(n=Jn(n)?n:M(n)).length},V.some=function(t,r,e){return gn(t,pn(r=e?n:r))},V.uniqueId=function(n){var t=++D;return Yn(n)+t},V.each=In,V.first=Nn,at(V,(ft={},un(V,function(n,t){q.call(V.prototype,t)||(ft[t]=n)}),ft),{chain:!1}),V.VERSION="4.17.11",Z(["pop","join","replace","reverse","split","push","shift","sort","splice","unshift"],function(n){var t=(/^(?:replace|split)$/.test(n)?String.prototype:R)[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",e=/^(?:pop|join|replace|shift)$/.test(n);V.prototype[n]=function(){var n=arguments;if(e&&!this.__chain__){var u=this.value();return t.apply(Gn(u)?u:[],n)}return this[r](function(r){return t.apply(Gn(r)?r:[],n)})}}),V.prototype.toJSON=V.prototype.valueOf=V.prototype.value=function(){return n=this.__wrapped__,Rn(this.__actions__,function(n,t){return t.func.apply(t.thisArg,N([n],t.args))},n);var n},"function"==typeof define&&"object"==_typeof(define.amd)&&define.amd?(A._=V,define(function(){return V})):S?((S.exports=V)._=V,E._=V):A._=V}).call(void 0);

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],4:[function(require,module,exports){
"use strict";var StoryLoader=require("./load-story");console.log("Hello, World"),$(function(){StoryLoader.loadStoryJson("Welcome to Re:Hubble","assets/map.json").then(function(e){var t=document.getElementById("story-container");t.appendChild(e),console.log(t),new DedalusWeb({domSource:$("#story"),domTarget:$("#host"),titleTarget:$("#title"),inventoryTarget:$("#inventoryHost"),interactionTarget:$("#interactionHost"),undoTarget:$("#undoHost"),undoStageTarget:$("#undoStageHost"),saveTarget:$("#saveHost"),restoreTarget:$("#restoreHost"),resetTarget:$("#reseteHost")})})}),module.exports={};

},{"./load-story":5}],5:[function(require,module,exports){
"use strict";var _exports=module.exports={},d3=require("d3-fetch"),_=require("lodash/core");function genPage(e,t){for(var n,r=document.createElement("page"),a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];return r.setAttribute("id",e),r.innerHTML=t,o&&o.length>0&&(n=r.classList).add.apply(n,o),r}function parseMap(e,t){var n=document.createElement("div");n.setAttribute("id","story");var r=document.createElement("initscript");r.innerHTML="\n    story.messageDamage  = 0;\n    story.messageScrewed = function () { return story.messageDamage < 2; };\n    story.cloakPutOn     = false;\n    story.cloakJustPutOn = false;\n  ";var a="originalTarget",o=document.createElement("beforeEveryThing");o.innerHTML="\n    console.log(11);\n    $('body').css('background-image', 'url(assets/images/main0.jpg)');\n    const bs = document.getElementById('host').getElementsByTagName('button');\n    for (const b of bs) {\n      console.log('Add event to ', b);\n      b.addEventListener('click', (event) => {\n          console.log(event);\n          try {\n            var thing = event.srcElement ? event.srcElement.getElementsByTagName('a') : event.".concat(a,".getElementsByTagName('a');\n            if (thing && thing[0]) {\n              thing[0].click();\n            }\n          } catch (x) {\n            console.error(x);\n          }\n        }, true);\n    }\n");var s=document.createElement("afterEveryPageTurn");s.innerHTML="\n    console.log(this);\n    if (this._story.currentPage >= 0) $('body').css('background-image', 'none');\n    const bs = document.getElementById('host').getElementsByTagName('button');\n    for (const b of bs) {\n      console.log('Add event to ', b);\n      b.addEventListener('click', (event) => {\n          console.log(event);\n          try {\n            var thing = event.srcElement ? event.srcElement.getElementsByTagName('a') : event.".concat(a,".getElementsByTagName('a');\n            if (thing && thing[0]) {\n              thing[0].click();\n            }\n          } catch (x) {\n            console.error(x);\n          }\n        }, true);\n    }\n");var i=e.nodes;n.appendChild(r),n.appendChild(o),n.appendChild(s);var c=document.createElement("title");c.innerHTML=t,n.appendChild(c);var l,d={};return _.each(i,function(e,t){e.acronym&&(d[e.id]={acronym:e.acronym})}),_.each(i,function(e,t){console.log("Node id=".concat(e.id," type=").concat(e.type," title=").concat(e.title));var r=e.body;_.isArray(r)&&(r=r.join("<br>"));var a="<h2>".concat(e.title,"</h2><p>").concat(r,"</p>");if("intro"!==e.type){var o=[];if(l||"foyer"!==e.type||(o.push("first"),l=!0),e.links&&e.links.length>0){var s="",i=!0,c=!1,g=void 0;try{for(var u,m=e.links[Symbol.iterator]();!(i=(u=m.next()).done);i=!0){var h=u.value,p=d[h.id];p&&(s+='<button type="button" class="btn btn-outline-warning primary achoice" role="button"><turn to="'.concat(h.id,'">').concat(p.acronym,"</turn> </button>"))}}catch(e){c=!0,g=e}finally{try{i||null==m.return||m.return()}finally{if(c)throw g}}var y="";"foyer"!==e.type&&s.length>0&&(y="What is your Destination?"),s.length>0&&(a+="<p>".concat(y," ").concat(s,"</p>"))}if(e.image&&(a+='<a target="_blank" href="'.concat(e.originalURL,'"><img class="nebula" src="assets/images/').concat(e.image,'"></a>')),e.arrivalEvents&&e.arrivalEvents.length>0){var v=!0,f=!1,b=void 0;try{for(var E,T=e.arrivalEvents[Symbol.iterator]();!(v=(E=T.next()).done);v=!0){var k=E.value;if(k.name.startsWith("Discover")){var w=k.name.split(" ")[1],L=w+"(".concat(k.score,")");a+="{{ story.putInInventory('".concat(w,"'); }}");var C=document.createElement("obj");C.setAttribute("id",w),C.setAttribute("inventoryName",L),n.appendChild(C)}}}catch(e){f=!0,b=e}finally{try{v||null==T.return||T.return()}finally{if(f)throw b}}}var P=genPage.apply(void 0,[e.id,a].concat(o));n.appendChild(P)}else n.appendChild(genPage("intro",a))}),n}_exports.loadDemoStory=function(e){console.log("Load Story from ".concat(e));var t=document.createElement("div"),n=document.createElement("initscript");n.innerHTML="\n    story.messageDamage  = 0;\n    story.messageScrewed = function () { return story.messageDamage < 2; };\n    story.cloakPutOn     = false;\n    story.cloakJustPutOn = false;",console.log(n);var r=document.createElement("title");r.innerHTML="Title hello world";var a=genPage("intro",'\n    <p>Hurrying through the rainswept November night, you\'re glad to see the bright lights of the Opera House. It\'s surprising that there aren\'t more people about but, hey, what do you expect in a cheap demo game...?</p>\n    <div class="center">Cloak of Darkness</div>\n    <div class="center">A basic IF demonstration.</div>'),o=genPage("foyer",'\n    <p>You are standing in a spacious hall, splendidly decorated in red and gold, with glittering chandeliers overhead.\n    There is an entrance from the <show paragraph="street">street</show>,\n    and there are doorways <turn to="bar" id="south">south</turn> and <turn to="cloakroom">west</turn>.</p>\n\n    <img class="nebula" src="assets/images/12.jpg">\n\n    <paragraph id="street">\n        You\'ve only just arrived, and besides, the weather outside seems to be getting worse.\n    </paragraph>',"first");return t.appendChild(n),t.appendChild(r),t.appendChild(a),t.appendChild(o),t.setAttribute("id","story"),t},_exports.loadStoryJson=function(e,t){return console.log("Load Story from ".concat(t)),new Promise(function(n,r){return d3.json(t).then(function(t){n(parseMap(t,e))})})};

},{"d3-fetch":2,"lodash/core":3}]},{},[4])(4)
});
//# sourceMappingURL=index.js.map
